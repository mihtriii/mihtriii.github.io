import{j as e,m as c}from"./framer-CJzoLlTw.js";import{r}from"./react-At2nUy-0.js";import{g as w,S as v}from"./index-5PnWEvdC.js";function _(){const[l,d]=r.useState([]),[p,m]=r.useState(!0),[h,u]=r.useState(""),[i,x]=r.useState(""),[o,j]=r.useState("All");r.useEffect(()=>{const s=sessionStorage.getItem("gh:repos");if(s)try{d(JSON.parse(s)),m(!1)}catch(a){}const t=new AbortController;return fetch(`https://api.github.com/users/${w.username}/repos?sort=updated&per_page=100`,{signal:t.signal}).then(async a=>{if(!a.ok)throw new Error(`GitHub API error: ${a.status}`);const n=await a.json();d(n),sessionStorage.setItem("gh:repos",JSON.stringify(n));try{const g=n.reduce((f,y)=>f+(y.stargazers_count||0),0);sessionStorage.setItem("gh:stats",JSON.stringify({repos:n.length,stars:g,ts:Date.now()})),window.dispatchEvent(new Event("gh:repos-updated"))}catch(g){}}).catch(a=>{a.name!=="AbortError"&&u(a.message||"Failed to load repos")}).finally(()=>m(!1)),()=>t.abort()},[]);const b=r.useMemo(()=>{const s=new Set(["All"]);return l.forEach(t=>t.language&&s.add(t.language)),Array.from(s)},[l]),N=r.useMemo(()=>l.filter(s=>{const t=o==="All"||s.language===o,a=i.trim().toLowerCase(),n=a===""||s.name.toLowerCase().includes(a)||(s.description||"").toLowerCase().includes(a);return t&&n}),[l,o,i]);return e.jsxs("div",{className:"row g-4",children:[e.jsx("aside",{className:"col-12 col-lg-3",children:e.jsx(v,{})}),e.jsxs("div",{className:"col-12 col-lg-9",children:[e.jsxs("section",{className:"page-hero hero-with-bg p-4 mb-3","data-animate":!0,children:[e.jsx("h1",{className:"h3 mb-1",children:e.jsx("span",{className:"gradient-text",children:"Repositories"})}),e.jsx("p",{className:"text-secondary mb-0",children:"Các dự án gần đây trên GitHub."})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-3",children:[b.map(s=>e.jsx("button",{className:`btn btn-sm ${o===s?"btn-primary":"btn-outline-secondary"}`,onClick:()=>j(s),children:s},s)),e.jsx("div",{className:"ms-auto"}),e.jsx("input",{className:"form-control form-control-sm",style:{maxWidth:260},placeholder:"Search repositories",value:i,onChange:s=>x(s.target.value)})]}),h&&e.jsx("div",{className:"alert alert-warning",role:"alert",children:h}),e.jsx(c.div,{className:"row g-3 row-cols-1 row-cols-md-2",initial:"hidden",animate:"show",variants:{hidden:{},show:{transition:{staggerChildren:.06,delayChildren:.06}}},children:p?Array.from({length:4}).map((s,t)=>e.jsx(c.div,{className:"col",variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0}},children:e.jsx("div",{className:"card h-100","aria-busy":"true",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"placeholder-glow",children:e.jsx("span",{className:"placeholder col-8"})}),e.jsxs("div",{className:"placeholder-glow mt-2",children:[e.jsx("span",{className:"placeholder col-12"}),e.jsx("span",{className:"placeholder col-10"})]})]})})},t)):N.map(s=>e.jsx(c.div,{className:"col",variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0}},children:e.jsx("a",{href:s.html_url,target:"_blank",rel:"noopener",className:"card card-hover card-elevate h-100 text-decoration-none","data-animate":!0,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("h2",{className:"h6 mb-2 d-flex align-items-center gap-2",children:[e.jsx("i",{className:"bi bi-journal-code"})," ",s.name]}),s.stargazers_count>0&&e.jsxs("span",{className:"badge text-bg-warning",children:[e.jsx("i",{className:"bi bi-star-fill"})," ",s.stargazers_count]})]}),e.jsx("p",{className:"text-secondary small mb-2",children:s.description||"No description"}),e.jsxs("div",{className:"d-flex gap-3 align-items-center text-secondary small",children:[s.language&&e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-circle-fill me-1",style:{color:"var(--brand-primary)"}}),s.language]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-git"})," ",s.forks_count," forks"]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-clock-history"})," ",new Date(s.updated_at).toLocaleDateString()]})]})]})})},s.id))})]})]})}export{_ as default};
